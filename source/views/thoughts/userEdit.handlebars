<script>
    async function loadCities(){
    const stateSelect = document.getElementById('state');
    const citySelect = document.getElementById('city');
    const selectedState = stateSelect.options[stateSelect.selectedIndex].text;
    const cities = await fetch(`/cities/${selectedState}`);
    const response = await cities.text();
    citySelect.innerHTML = response;
    }
</script>

<a href="/thoughts/profile/{{user.id}}/{{user.id}}">Voltar</a>
<div id="layoutAuthentication">
    <div id="layoutAuthentication_content">
        <main>
            <div class="container">
                <div class="row my-5" style="justify-content: center;">
                    <img src="{{user.img}}" alt="Imagem do usuário" style="width: 150px; border-radius: 50%">
                </div>
                <div class="row justify-content-center">
                    <div class="col-lg-5">
                        <div class="card shadow-lg border-0 rounded-lg mt-5 bg-secondary border-dark">
                            <div class="card-header bg-primary">
                                <h3 class="text-center font-weight-light my-4 text-light" style="font-size: 40px;">Editar informações da conta</h3>
                            </div>
                            <div class="card-body">
                                <form action="{{id}}" method="post" enctype="multipart/form-data">
                                    <div class="form-floating mb-3">
                                        <input class="form-control" id="name" name="name" type="text" value="{{user.name}}" />
                                        <label for="name">Nome</label>
                                    </div>
                                    
                                    <div class="form-floating mb-3">
                                        <select id="state" name="state" class="form-control" onchange="loadCities()">
                                            <option selected>Selecione um Estado</option>
                                            <option>AC</option>
                                            <option>AL</option>
                                            <option>AP</option>
                                            <option>AM</option>
                                            <option>BA</option>
                                            <option>CE</option>
                                            <option>DF</option>
                                            <option>ES</option>
                                            <option>GO</option>
                                            <option>MA</option>
                                            <option>MG</option>
                                            <option>MS</option>
                                            <option>MT</option>
                                            <option>PA</option>
                                            <option>PB</option>
                                            <option>PR</option>
                                            <option>PE</option>
                                            <option>PI</option>
                                            <option>RJ</option>
                                            <option>RN</option>
                                            <option>RS</option>
                                            <option>RO</option>
                                            <option>RR</option>
                                            <option>SC</option>
                                            <option>SP</option>
                                            <option>SE</option>
                                            <option>TO</option>
                                        </select required>
                                        <label for="state">Estado</label>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <select id="city" name="city" class="form-control">
                                            <option selected>Selecione uma Cidade</option>
                                        </select required>
                                        <label for="city">Cidade</label>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input type="file" id="image" name="image" class="form-control" accept="image/*">
                                        <label for="image">Selecionar Imagem</label>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input class="form-control" id="descricao" name="descricao" type="text" value="{{user.description}}" />
                                        <label for="descricao">Descrição</label>
                                    </div>                                    
                                        <input class="btn btn-success" type="submit" style="width: 100px; height: auto;" value="Editar">
                                    
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
